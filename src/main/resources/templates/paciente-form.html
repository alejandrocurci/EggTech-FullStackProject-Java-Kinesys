<!DOCTYPE html>
<html
      lang="es"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns="http://www.w3.org/1999/xhtml"
>
<head>
      <meta charset="UTF-8">

      <meta
            name="viewport"
            content="width=device-width, initial-scale=1.0"
      >

      <meta
            http-equiv="X-UA-Compatible"
            content="ie=edge"
      >

      <meta
            name="description"
            content="Kinesys"
      >

      <meta
            name="Mesa 9"
            content="Leonardo Mella"
      >

      <title>Paciente-Formulario</title>

      <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
            crossorigin="anonymous"
      >

      <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.4.1/font/bootstrap-icons.css"
      >

      <link
            rel="stylesheet"
            th:href="@{/estilos.css}"
      >
</head>

<body>

</div>
      <div class="container mt-5 main">
            <h1 style="color:black"  th:text="${titulo}" ></h1>
            <hr class="mb-5 col-xl-10"/>
            
            <div class="alert alert-danger" th:if="${error != null}" th:text="${error}"></Div>
            <form
                  id="formulario"
                  class="needs-validation"
                  th:action="@{/pacientes/__${action}__}"
                  method="POST"
                  th:object="${paciente}"
                  novalidate>

                  <!-- DNI -->
                  <label for="dni">DNI</label>

                  <div class="form-floating mb-2 col-xl-3">
                        <input
                                id="dni"
                                class="form-control"
                                type="number"
                                placeholder="Ingrese dni"
                                th:field="*{dni}"
                                th:value="${paciente.dni}"
                                required
                                maxlength="8"
                                oninput="event.target.value = event.target.value.replace(/[^0-9]*/g,'');"
                        >
                  </div>
                  <!-- <div th:if="${#fields.hasErrors('dni')}" th:errors="*{dni}" ></div>-->
                   <!--th:field= "atributo" si coloccamos el th:object-->
                  <!--th:value= "objeto.atributo" -->

                  <!-- Nombre -->
                  <label for="nombre">Nombre</label>

                  <div class="form-floating mb-2 col-xl-3">
                        <input
                                id="nombre"
                                class="form-control"
                                type="text"
                                placeholder="Ingrese nombre"
                                th:field="*{nombre}"
                                required
                        >
                  </div>
                  <!--<div th:if="${error != null && error.containsKey('nombre')}" th:text="${error.nombre}" ></div>-->
                  <!-- Apellido -->
                  <label for="apellido">Apellido</label>

                  <div class="form-floating mb-2 col-xl-3">
                        <input
                              id="apellido"
                              class="form-control"
                              type="text"
                              placeholder="Ingrese apellido"
                              th:field="*{apellido}"
                              required
                        >
                  </div>
                  <!-- <div th:if="${error != null && error.containsKey('apellido')}" th:text="${error.apellido}" ></div>-->
                  <!-- telefono -->
                  <label for="telefono">Telefono</label>

                  <div class="form-floating mb-2 col-xl-3">
                        <input
                              id="telefono"
                              class="form-control"
                              type="text"
                              placeholder="Ingrese telefono"
                              th:field="*{telefono}"
                              required
                        >
                  </div>
                  <!--<div th:if="${error != null && error.containsKey('telefono')}" th:text="${error.telefono}" ></div>-->
                  <!-- email -->
                  <label for="email">Email</label>

                  <div class="form-floating mb-2 col-xl-3">
                        <input
                                id="email"
                                class="form-control"
                                type="email"
                                placeholder="Ingrese email"
                                th:field="*{email}"
                                required
                        >
                  </div>
                  <!--<div th:if="${error != null && error.containsKey('email')}" th:text="${error.email}" ></div>-->

                  <div th:object="${usuario}" >

                  <!-- -Nombre Usuario -->
                  <label for="nombreU">Usuario</label>

                  <div  class="form-floating mb-2 col-xl-3">
                        <input
                                id="nombreU"
                                class="form-control"
                                type="text"
                                placeholder="Ingrese usuario"
                                th:field="*{nombreU}"
                                required
                        >
                  </div>

                  <!-- contraseña -->

                  <label for="password">contraseña</label>

                  <div class="form-floating mb-2 col-xl-3">
                        <input
                                id="password"
                                class="form-control"
                                type="password"
                                placeholder="Ingrese contraseña"
                                th:field="*{clave}"
                                required
                        >
                  </div>
                  </div>
                  <div class="row">
                        <div class="col-xl-3">
                              <button
                                    class="btn btn-success"
                                    style="color:#FFD27D;"
                                    type="submit"
                                    th:text="${action == 'guardar'} ? 'Registrar' : 'Guardar cambios'"
                              ></button>

                              <!-- si el valor que tiene este action(variable) es = a guardar  "?" es igual a crear editorial ":" y sino voy a mostrar guardar cambios -->
                        </div>
                  </div>

            </form>
     
      </div>
      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0/dist/js/bootstrap.bundle.min.js"
              integrity="sha384-p34f1UUtsS3wqzfto5wAAmdvj+osOnFyQFpp4Ua3gs/ZVWx6oOypYoCJhGGScy+8"
              crossorigin="anonymous">

      </script>
      <script>
  (() => {
      "use strict";
      const form = document.getElementById("formulario");
      form.addEventListener("submit", (event) => {
          if (!form.checkValidity()) {
              event.preventDefault();
              event.stopPropagation();
          }

          form.classList.add("was-validated");
      }, false);
  })();
</script>
</body>
</html>